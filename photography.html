<script>
    // --- CONFIGURATION ---
    const GITHUB_USERNAME = 'SamiKares'; 
    const REPO_NAME = 'samikares.github.io'; // Ensure casing matches your repo exactly
    const FOLDER_PATH = 'portfolio-images'; 

    async function loadPhotos() {
        const gallery = document.getElementById('photo-gallery');
        
        try {
            // 1. We construct the URL dynamically using the variables above
            const apiUrl = `https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents/${FOLDER_PATH}`;
            
            const response = await fetch(apiUrl);

            // 2. Safety check: GitHub limits free API calls to 60/hour. 
            // If we hit the limit, we show a helpful error.
            if (response.status === 403) {
                throw new Error('GitHub API rate limit exceeded. Try again in an hour.');
            }
            
            if (!response.ok) {
                 throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();

            // Clear skeletons
            gallery.innerHTML = '';

            // Filter for images only
            const images = data.filter(file => 
                file.name.match(/\.(jpg|jpeg|png|gif|webp)$/i)
            );

            if (images.length === 0) {
                gallery.innerHTML = '<p class="text-gray-500 text-center col-span-full">No photos found in folder.</p>';
                return;
            }

            // Generate HTML for each image
            images.forEach(image => {
                const container = document.createElement('div');
                container.className = 'img-container group relative overflow-hidden rounded-sm bg-gray-900 mb-6 break-inside-avoid';
                
                // Clean up the filename for the label (remove extension and hyphens)
                const label = image.name.split('.')[0].replace(/-/g, ' ');

                container.innerHTML = `
                    <img 
                        src="${image.download_url}" 
                        alt="${label}"
                        class="w-full h-auto object-cover opacity-80 group-hover:opacity-100 transition-all duration-500 transform group-hover:scale-105"
                        loading="lazy"
                    >
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-4">
                        <span class="text-[10px] uppercase tracking-widest text-white/90 font-medium">${label}</span>
                    </div>
                `;
                gallery.appendChild(container);
            });

        } catch (error) {
            console.error('Error loading images:', error);
            // Show the error on screen so you know what went wrong
            gallery.innerHTML = `<p class="text-red-500 text-center col-span-full text-sm font-mono mt-10">System Status: ${error.message}</p>`;
        }
    }

    loadPhotos();
</script>
